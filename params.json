{"name":"Rtems","tagline":"Kernel, networking, file-systems, drivers, BSPs, samples, and testsuite.","body":"# Welcome to the RTEMS virtualization layer Google Summer of Code project.\r\n\r\nThis page will hold information about status, configuration and build process. \r\n\r\n\r\n# The good news first: Hello World runs!\r\n\r\n\r\nTo get there you need five steps:\r\n1. Build the rtems-guest example in POK.\r\n2. Copy libpart.a from rtems-guest/generated-code/cpu/part1/ to\r\n    c/src/lib/libbsp/i386/virtPok/\r\n3. Build virtPok bsp\r\n4. Copy hello binary to POK partition and rebuild kernel binary\r\n5. make run\r\n\r\n\r\n### 1. Build the rtems-guest example\r\n\r\nI assume you have checked out my POK fork and ran make configure.\r\n\r\n* Change directory to ${POK}/examples/rtems-guest/\r\n* Run make \r\n* Change directory to generated-code/cpu/\r\n* Copy the last line in part1/Makefile and change rules-common in rules-libpart\r\n* Execute 'make partitions'\r\n\r\n\r\n### 2. Copy libpart.a\r\n\r\nThe last step created a library file called libpart.a in part1/ directory.\r\nThis file must be moved to RTEMS.\r\n\r\ncp ${POK}/examples/rtems-guest/generated-code/cpu/part1/libpart.a \\\r\n  ${RTEMS}/c/src/lib/libbsp/i386/virtPok/\r\n\r\n\r\n### 3. Build RTEMS\r\n\r\nNow you are ready to build RTEMS with the virtPok BSP.\r\n\r\n* Create a build directory next to your RTEMS directory, I assume it is called\r\n'b-virtPok'.\r\n* cd b-virtPok\r\n* Configure RTEMS with the following:\r\n  ../rtems/configure --target=i386-rtems4.11 --enable-rtemsbsp=virtPok --enable-cxx --disable-networking --disable-posix --enable-maintainer-mode\r\n* make \r\n\r\nThis process will sucessfully build the hello sample, but will fail on the next\r\none.\r\n\r\n\r\n### 4. Copy hello sample elf and build the final kernel binary again\r\n\r\nThe compiled binary is ready to be run as a partition on POK.\r\n\r\nCopy the compiled hello.exe ELF binary to replace the partition binary.\r\n\r\ncp ${Builddir}/virtPok-i386/c/virtPok/testsuite/samples/hello/hello.exe \\\r\n    ${POK}/examples/rtems-guest/generated-code/cpu/part1/part1.elf\r\n\r\n\r\nNow we need to generate the partition table again and link the kernel binary\r\nagain:\r\n\r\n* cd ${POK}/examples/rtems-guest/generated-code/cpu/\r\n* make build-kernel\r\n\r\n\r\n### 5. Run qemu\r\n\r\nChange your directory to ${POK}/examples/rtems-guest/ and execute 'make run'.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}